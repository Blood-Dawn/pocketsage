{% extends 'base.html' %}
{% block title %}Overview Â· PocketSage{% endblock %}
{% block content %}
  <h1>Overview</h1>
  <section class="overview-cards">
    <article class="card">
      <h2>Balances</h2>
      <p class="metric">{{ '${:,.2f}'.format(summary.balances.net) }}</p>
      <dl>
        <div>
          <dt>Total inflow</dt>
          <dd>{{ '${:,.2f}'.format(summary.balances.inflow) }}</dd>
        </div>
        <div>
          <dt>Total outflow</dt>
          <dd>{{ '${:,.2f}'.format(summary.balances.outflow) }}</dd>
        </div>
        <div>
          <dt>Spending (30 days)</dt>
          <dd>{{ '${:,.2f}'.format(summary.balances.recent_spending) }}</dd>
        </div>
      </dl>
      <a class="cta" href="{{ url_for('ledger.list_transactions') }}">View ledger</a>
    </article>

    <article class="card">
      <h2>Habits</h2>
      <p class="metric">{{ summary.habits.active }} active</p>
      <dl>
        <div>
          <dt>Tracked habits</dt>
          <dd>{{ summary.habits.total }}</dd>
        </div>
        <div>
          <dt>Completions today</dt>
          <dd>{{ summary.habits.completions_today }}</dd>
        </div>
        <div>
          <dt>Completions (7 days)</dt>
          <dd>{{ summary.habits.weekly_completions }}</dd>
        </div>
        <div>
          <dt>Best streak</dt>
          <dd>{{ summary.habits.best_streak }}</dd>
        </div>
      </dl>
      <a class="cta" href="{{ url_for('habits.list_habits') }}">Go to habits</a>
    </article>

    <article class="card">
      <h2>Liabilities</h2>
      <p class="metric">{{ '${:,.2f}'.format(summary.liabilities.total_balance) }}</p>
      <dl>
        <div>
          <dt>Accounts</dt>
          <dd>{{ summary.liabilities.count }}</dd>
        </div>
        <div>
          <dt>Average APR</dt>
          <dd>{{ '{:.2f}%'.format(summary.liabilities.average_apr) }}</dd>
        </div>
      </dl>
      <a class="cta" href="{{ url_for('liabilities.list_liabilities') }}">Review liabilities</a>
    </article>

    <article class="card">
      <h2>Portfolio</h2>
      <p class="metric">{{ '${:,.2f}'.format(summary.portfolio.total_value) }}</p>
      <dl>
        <div>
          <dt>Holdings tracked</dt>
          <dd>{{ summary.portfolio.holdings }}</dd>
        </div>
        {% if summary.portfolio.top_holdings %}
          <div>
            <dt>Top holdings</dt>
            <dd>
              <ul class="inline-list">
              {% for holding in summary.portfolio.top_holdings %}
                <li>
                  {{ holding.symbol }}
                  <span class="muted">({{ '{:,.2f}%'.format(holding.allocation_pct) }})</span>
                </li>
              {% endfor %}
              </ul>
            </dd>
          </div>
        {% endif %}
      </dl>
      <a class="cta" href="{{ url_for('portfolio.list_portfolio') }}">Open portfolio</a>
    </article>
  </section>

  <section class="quick-links">
    <h2>Quick links</h2>
    <ul>
      <li><a href="{{ url_for('ledger.list_transactions') }}">Ledger</a></li>
      <li><a href="{{ url_for('habits.list_habits') }}">Habits</a></li>
      <li><a href="{{ url_for('liabilities.list_liabilities') }}">Liabilities</a></li>
      <li><a href="{{ url_for('portfolio.list_portfolio') }}">Portfolio</a></li>
      <li><a href="{{ url_for('admin.dashboard') }}">Admin</a></li>
    </ul>
  </section>
{% endblock %}
